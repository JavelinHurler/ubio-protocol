{
    "description": "",
    "private": false,
    "successCode": {
        "outputKey": "purchaseConfirmation",
        "valuePath": "/purchaseReference"
    },
    "inputs": {
        "options": {
            "typeRef": "#/domains/PetInsurance/types/Options",
            "default": {},
            "initial": true
        },
        "url": {
            "typeRef": "#/domains/Generic/types/URL",
            "description": "Website entry point.",
            "initial": true
        },
        "pets": {
            "description": "Information about the pet (name, type, breed, gender ,standard questions etc",
            "typeRef": "#/domains/PetInsurance/types/Pets"
        },
        "selectedBreedType": {
            "typeRef": "#/domains/PetInsurance/types/BreedType",
            "description": "Selected breed typology (Pedigree, Non-Pedigree etc)",
            "sourceOutputKey": "availableBreedTypes",
            "inputMethod": "SelectOne"
        },
        "payment": {
            "typeRef": "#/domains/Generic/types/Payment"
        },
        "directDebit": {
            "typeRef": "#/domains/PetInsurance/types/DirectDebitPayment"
        },
        "owner": {
            "typeRef": "#/domains/PetInsurance/types/Owner",
            "description": "Details about the pet owner and address"
        },
        "panToken": {
            "typeRef": "#/domains/Generic/types/PanToken"
        },
        "account": {
            "typeRef": "#/domains/Generic/types/Account"
        },
        "finalPriceConsent": {
            "typeRef": "#/domains/Generic/types/PriceConsent",
            "description": "Client's consent for final price, should exactly match the <code>finalPrice</code> object from output.<br/>Automation will not proceed with placing order until the consent is provided.",
            "sourceOutputKey": "finalPrice",
            "inputMethod": "Consent"
        },
        "selectedMaritalStatusOption": {
            "typeRef": "#/domains/PetInsurance/types/MaritalStatusOption",
            "description": "Marital status of the owner",
            "sourceOutputKey": "availableMaritalStatusOptions",
            "inputMethod": "SelectOne"
        },
        "policyOptions": {
            "typeRef": "#/domains/PetInsurance/types/PolicyOption",
            "description": "Cover start date, number of pets owned, second policy holder(if any)"
        },
        "selectedVoluntaryExcess": {
            "typeRef": "#/domains/PetInsurance/types/VoluntaryExcess",
            "description": "Selected voluntary excess",
            "sourceOutputKey": "availableVoluntaryExcesses",
            "inputMethod": "SelectOne"
        },
        "selectedAddress": {
            "typeRef": "#/domains/PetInsurance/types/Address",
            "sourceOutputKey": "availableAddresses",
            "description": "After postcode input is needed to choose the address from a drop-down list",
            "inputMethod": "SelectOne"
        },
        "selectedCover": {
            "typeRef": "#/domains/PetInsurance/types/Cover",
            "description": "Selected protection cover.",
            "sourceOutputKey": "availableCovers",
            "inputMethod": "SelectOne"
        },
        "selectedCoverType": {
            "typeRef": "#/domains/PetInsurance/types/CoverType",
            "description": "Type of coverage",
            "sourceOutputKey": "availableCoverTypes",
            "inputMethod": "SelectOne"
        },
        "selectedVetFee": {
            "typeRef": "#/domains/PetInsurance/types/VetFee",
            "description": "Vet fee amount covered",
            "sourceOutputKey": "availableVetFees",
            "inputMethod": "SelectOne"
        },
        "selectedCoverOptions": {
            "typeRef": "#/domains/PetInsurance/types/CoverOptions",
            "description": "Optional extra packages",
            "sourceOutputKey": "availableCoverOptions",
            "inputMethod": "SelectMany"
        },
        "selectedVetPaymentTerm": {
            "typeRef": "#/domains/PetInsurance/types/PaymentTerm",
            "description": "Type of vet bill coverage",
            "sourceOutputKey": "availableVetPaymentTerms",
            "inputMethod": "SelectOne"
        },
        "selectedPaymentTerm": {
            "typeRef": "#/domains/PetInsurance/types/PaymentTerm",
            "description": "Method of payment (card, directdebit etc)",
            "sourceOutputKey": "availablePaymentTerms",
            "inputMethod": "SelectOne"
        }
    },
    "outputs": {
        "estimatedPrice": {
            "description": "Emitted before asking for payment information.<br/>This is usually not the final amount to be paid, especially on websites which charge credit and company cards additionally. You will get <code>finalPrice</code> later.",
            "typeRef": "#/domains/Generic/types/PriceConsent"
        },
        "availableBreedTypes": {
            "typeRef": "#/domains/PetInsurance/types/BreedTypes",
            "description": "Available breed typologies (Pedigree, Non-Pedigree etc)"
        },
        "finalPrice": {
            "description": "Emitted immediately before placing order, when final price is available.<br/>Automation will request <code>finalPriceConsent</code> input which should match this object.",
            "typeRef": "#/domains/Generic/types/PriceConsent"
        },
        "availableMaritalStatusOptions": {
            "description": "Owner's marital status available options",
            "typeRef": "#/domains/PetInsurance/types/MaritalStatusOptions"
        },
        "availableVoluntaryExcesses": {
            "description": "Available voluntary excesses (in % increments)",
            "typeRef": "#/domains/PetInsurance/types/VoluntaryExcesses"
        },
        "availableAddresses": {
            "description": "Available addresses after postcode input",
            "typeRef": "#/domains/PetInsurance/types/Addresses"
        },
        "availableCovers": {
            "description": "Available protection covers.",
            "typeRef": "#/domains/PetInsurance/types/Covers"
        },
        "availableCoverTypes": {
            "description": "Available types of coverage",
            "typeRef": "#/domains/PetInsurance/types/CoverTypes"
        },
        "availableVetFees": {
            "description": "Availebel vet fee amounts covered",
            "typeRef": "#/domains/PetInsurance/types/VetFees"
        },
        "availableCoverOptions": {
            "description": "Available optional extra packages",
            "typeRef": "#/domains/PetInsurance/types/CoverOptions"
        },
        "availableVetPaymentTerms": {
            "description": "Available types of vet bill coverage",
            "typeRef": "#/domains/PetInsurance/types/PaymentTerms"
        },
        "availablePaymentTerms": {
            "description": "Available methods of payment (card, directdebit etc)",
            "typeRef": "#/domains/PetInsurance/types/PaymentTerms"
        },
        "insuranceProductInformationDocument": {
            "typeRef": "#/domains/PetInsurance/types/NullableStructuredTextItem",
            "description": "Emitted when the document inforamtion is presented."
        },
        "essentialInformation": {
            "typeRef": "#/domains/PetInsurance/types/NullableStructuredTextItem",
            "description": "Emitted when the esential information document is presented."
        },
        "policyWording": {
            "typeRef": "#/domains/PetInsurance/types/NullableStructuredTextItem",
            "description": "Emitted when the policy wording is presented."
        },
        "purchaseConfirmation": {
            "typeRef": "#/domains/PetInsurance/types/PurchaseConfirmation"
        },
        "availableDirectDebitPaymentDays": {
            "typeRef": "#/domains/PetInsurance/types/AvailablePaymentDays",
            "description": "List of available DD payment days."
        },
        "eligibilityConditions": {
            "typeRef": "#/domains/PetInsurance/types/NullableStructuredTextItem",
            "description": "Emitted when the eligibility conditions are presented."
        }
    },
    "types": {
        "Options": {
            "type": "object",
            "description": ""
        },
        "Pets": {
            "type": "array",
            "description": "An array with flags and informations about pets",
            "pii": true,
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/Pet"
            }
        },
        "Pet": {
            "type": "object",
            "description": "",
            "additionalProperties": false,
            "properties": {
                "petName": {
                    "type": "string",
                    "description": "Pet Name",
                    "example": "Rex"
                },
                "petType": {
                    "type": "string",
                    "description": "",
                    "example": "dog"
                },
                "petGender": {
                    "type": "string",
                    "description": "",
                    "example": "Male"
                },
                "breedName": {
                    "type": "string",
                    "description": "Your pet breed",
                    "example": "Afgan"
                },
                "dateOfBirth": {
                    "type": "string",
                    "description": "Date of birth in YYYY-MM-DD format.",
                    "format": "date",
                    "example": "1976-01-27"
                },
                "petPrice": {
                    "type": "string",
                    "default": "",
                    "description": "The price given for the pet"
                },
                "relatedQuestions": {
                    "properties": {
                        "isSpayedOrNeutered": {
                            "type": "boolean",
                            "default": false
                        },
                        "hasChipOrTag": {
                            "type": "boolean",
                            "default": false
                        },
                        "isKeptAtYourAddress": {
                            "type": "boolean",
                            "default": false
                        },
                        "anyBehaviourComplains": {
                            "type": "boolean",
                            "default": false
                        },
                        "indoorPet": {
                            "type": "boolean",
                            "default": false
                        },
                        "isYourPetHealthy": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                }
            }
        },
        "BreedType": {
            "type": "string",
            "description": ""
        },
        "BreedTypes": {
            "type": "array",
            "description": "",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/BreedType"
            }
        },
        "PolicyOption": {
            "type": "object",
            "description": "",
            "properties": {
                "coverStartDate": {
                    "type": "string",
                    "description": "Cover Start Date",
                    "example": "2019-04-02"
                },
                "numberOfPetsOwned": {
                    "type": "number",
                    "description": "",
                    "example": "2019-04-02"
                },
                "jointPolicyHolder": {
                    "type": "boolean",
                    "default": false
                }
            },
            "additionalProperties": false
        },
        "Address": {
            "type": "string"
        },
        "Addresses": {
            "type": "array",
            "description": "",
            "pii": true,
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/Address"
            }
        },
        "Cover": {
            "type": "string",
            "description": ""
        },
        "Covers": {
            "type": "array",
            "description": "",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/Cover"
            }
        },
        "MaritalStatusOption": {
            "type": "string",
            "description": ""
        },
        "MaritalStatusOptions": {
            "type": "array",
            "description": "",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/MaritalStatusOption"
            }
        },
        "VoluntaryExcesses": {
            "type": "array",
            "description": "",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/VoluntaryExcess"
            }
        },
        "VoluntaryExcess": {
            "type": "object",
            "description": "",
            "additionalProperties": false,
            "properties": {
                "name": {
                    "type": "string",
                    "description": "",
                    "example": "dog"
                },
                "details": {
                    "type": "string",
                    "description": ""
                },
                "priceLine": {
                    "type": "string",
                    "description": "",
                    "example": "Afgan"
                }
            }
        },
        "CoverTypes": {
            "type": "array",
            "description": "",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/CoverType"
            }
        },
        "CoverType": {
            "type": "object",
            "description": "",
            "additionalProperties": false,
            "properties": {
                "coverName": {
                    "type": "string",
                    "description": "",
                    "example": "Accident Only"
                },
                "price": {
                    "$ref": "#/domains/Generic/types/Price"
                }
            },
            "required": [
                "coverName",
                "price"
            ]
        },
        "PaymentTerm": {
            "type": "string",
            "description": "Payment term. The outlier is <strong>monthly-directdebit-card</strong>, which specifies that card payment must be used to pay the initial deposit, but direct debit must be set up for recurring monthly payments."
        },
        "PaymentTerms": {
            "type": "array",
            "description": "List of payment terms.",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/PaymentTerm"
            }
        },
        "Payment": {
            "type": "object",
            "description": "Payment information, including card details and billing address.",
            "pii": true,
            "properties": {
                "person": { "$ref": "#/domains/Generic/types/Person" },
                "card": { "$ref": "#/domains/Generic/types/PaymentCard" },
                "address": { "$ref": "#/domains/Generic/types/Address" },
                "selectedPaymentDay": {
                    "type": "string",
                    "description": "Preferred payment day, one of availableCardPaymentDays.",
                    "example": "10"
                }
            },
            "required": [
                "card",
                "person",
                "address"
            ],
            "additionalProperties": false
        },
        "DirectDebitPayment": {
            "type": "object",
            "description": "Account details for direct debit.",
            "pii": true,
            "properties": {
                "sortCode": {
                    "type": "string",
                    "description": "Bank sort code",
                    "pattern": "\\d{2}-?\\d{2}-?\\d{2}",
                    "example": "56-00-29"
                },
                "accountNumber": {
                    "type": "string",
                    "minLength": 8,
                    "maxLength": 8,
                    "description": "Cover marketing name as provided by the insurer.",
                    "example": "26207729"
                },
                "accountHolder": { "$ref": "#/domains/Generic/types/Person" },
                "accountHolderAddress": { "$ref": "#/domains/Generic/types/Address" },
                "selectedPaymentDay": {
                    "type": "string",
                    "description": "Preferred payment day, one of availableDirectDebitPaymentDays.",
                    "example": "10"
                }
            },
            "required": [
                "sortCode",
                "accountNumber",
                "accountHolder",
                "accountHolderAddress"
            ],
            "additionalProperties": false
        },
        "VetFee": {
            "type": "object",
            "description": "",
            "properties": {
                "text": {
                    "type": "string",
                    "description": "",
                    "example": "Accident Only"
                },
                "price": {
                    "$ref": "#/domains/Generic/types/Price"
                }
            },
            "required": [
                "text",
                "price"
            ]
        },
        "AvailablePaymentDays": {
            "oneOf": [{
                    "type": "array",
                    "description": "List of payment days.",
                    "items": { "type": "string" }
                },
                {
                    "type": "null"
                }
            ]
        },
        "VetFees": {
            "type": "array",
            "description": "",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/VetFee"
            }
        },
        "CoverOptions": {
            "type": "array",
            "description": "",
            "minItems": 1,
            "items": {
                "$ref": "#/domains/PetInsurance/types/CoverOption"
            }
        },
        "CoverOption": {
            "type": "object",
            "description": "",
            "additionalProperties": false,
            "properties": {
                "name": {
                    "type": "string",
                    "description": "",
                    "example": "dog"
                },
                "details": {
                    "type": "string",
                    "description": "",
                    "example": "Male"
                },
                "price": {
                    "$ref": "#/domains/Generic/types/Price"
                }
            },
            "required": [
                "name",
                "details",
                "price"
            ]
        },
        "Owner": {
            "type": "object",
            "pii": true,
            "additionalProperties": false,
            "properties": {
                "person": {
                    "type": "object",
                    "description": "Basic information about person's identity.",
                    "properties": {
                        "title": {
                            "type": "string",
                            "description": "",
                            "enum": [
                                "mr",
                                "miss",
                                "ms",
                                "mrs"
                            ]
                        },
                        "firstName": {
                            "type": "string",
                            "description": "First name(s) or given name(s), as specified in ID.",
                            "minLength": 1,
                            "example": "Bob"
                        },
                        "middleName": {
                            "type": "string",
                            "default": "",
                            "description": "Middle name, if applicable.<br/>This will only be used on websites which provide separate entry for middle names, otherwise it will be ignored.<br/>If middle name is essential for placing order, consider appending it to <code>firstName</code>."
                        },
                        "lastName": {
                            "type": "string",
                            "description": "Last name or surname, as specified in ID.",
                            "minLength": 1,
                            "example": "Smith"
                        },
                        "dateOfBirth": {
                            "type": "string",
                            "description": "Proposer's date of birth in YYYY-MM-DD format.",
                            "format": "date",
                            "example": "1976-01-27"
                        }
                    },
                    "required": [
                        "title",
                        "firstName",
                        "lastName",
                        "dateOfBirth"
                    ]
                },
                "address": {
                    "line1": {
                        "type": "string",
                        "description": "Street name with house number.",
                        "minLength": 1,
                        "example": "501 Twin Peaks Blv"
                    },
                    "line2": {
                        "type": "string",
                        "description": "Additional address information (e.g. flat).",
                        "example": "Flat 2"
                    },
                    "city": {
                        "type": "string",
                        "description": "Name of city, town or other settlement.",
                        "minLength": 1,
                        "example": "San Francisco"
                    },
                    "postcode": {
                        "type": "string",
                        "description": "Postcode in country-specific format, e.g. 5-digit number in US or <code>E3 3RP</code> in UK.",
                        "minLength": 1,
                        "example": "94581"
                    },
                    "countryCode": {
                        "$ref": "#/domains/Generic/types/CountryCode"
                    },
                    "countrySubdivision": {
                        "$ref": "#/domains/Generic/types/CountrySubdivision"
                    },
                    "required": [
                        "line1",
                        "line2",
                        "postcode"
                    ]
                }
            }
        },
        "PurchaseConfirmation": {
            "type": "object",
            "description": "Information gathered on the \"confirmation\" page.",
            "additionalProperties": false,
            "properties": {
                "purchaseReference": {
                    "type": "string",
                    "description": "Reference code grabbed from the page.",
                    "example": "RL2XYZ"
                },
                "message": {
                    "type": "string",
                    "description": "The confirmation message.",
                    "example": "Thank you for using UBIO Insurance. Your quote is ABC123 and purchase reference is DEF456."
                },
                "price": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "Price, if found on the confirmation page."
                }
            },
            "required": [
                "purchaseReference",
                "message",
                "price"
            ]
        },
        "NullableStructuredTextItem": {
            "oneOf": [{
                    "$ref": "#/domains/Generic/types/StructuredTextItem"
                },
                {
                    "type": "null"
                }
            ]
        }
    },
    "errors": [{
            "code": "QuoteNotFound",
            "category": "client",
            "description": "Given quote was not found by the insurer."
        },
        {
            "code": "RegistrationNumberInvalid",
            "category": "client",
            "description": "Registration number is not accepted by the website"
        },
        {
            "code": "RegistrationNumberRequired",
            "category": "client",
            "description": "Registration number is required by the website"
        },
        {
            "code": "PolicyAlreadyPurchased",
            "category": "client",
            "description": "The policy has already been purchased."
        },
        {
            "code": "DirectDebitRejected",
            "category": "client",
            "description": "Direct debit details provided have been rejected by the website."
        },
        {
            "code": "BreedTypeRequired",
            "category": "client",
            "description": "Breed type is required by the website"
        }
    ]
}